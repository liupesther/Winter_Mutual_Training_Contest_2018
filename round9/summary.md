　　开场看 t1，写了个~~网络流~~BFS就过了。

　　再看 t2，想了一会发现扫描线可以做到一个 $\log$，写+调了很久，数组也开小了，改了一下就过了。

　　t3 没有仔细想。

---

　　t3 就用优秀的拆分找出所有的 `primitive square`（这个东西的个数是 $O(n\log n)$ 的） ，然后容斥 DP 一下就好了。